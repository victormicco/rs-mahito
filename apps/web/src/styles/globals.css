@import "tailwindcss";
@import "fumadocs-ui/style.css";

@theme {
	--font-sans: "Inter", ui-sans-serif, system-ui, sans-serif;
	--font-mono: "JetBrains Mono", ui-monospace, monospace;

	/* Light theme - Purple accent */
	--color-fd-background: hsl(0, 0%, 96%);
	--color-fd-foreground: hsl(0, 0%, 3.9%);
	--color-fd-muted: hsl(0, 0%, 96.1%);
	--color-fd-muted-foreground: hsl(0, 0%, 45.1%);
	--color-fd-popover: hsl(0, 0%, 98%);
	--color-fd-popover-foreground: hsl(0, 0%, 15.1%);
	--color-fd-card: hsl(0, 0%, 94.7%);
	--color-fd-card-foreground: hsl(0, 0%, 3.9%);
	--color-fd-border: hsla(0, 0%, 80%, 50%);
	--color-fd-primary: hsl(0, 0%, 9%);
	--color-fd-primary-foreground: hsl(0, 0%, 98%);
	--color-fd-secondary: hsl(0, 0%, 93.1%);
	--color-fd-secondary-foreground: hsl(0, 0%, 9%);
	--color-fd-accent: hsla(0, 0%, 82%, 50%);
	--color-fd-accent-foreground: hsl(0, 0%, 9%);
	--color-fd-ring: hsl(0, 0%, 63.9%);
}

.dark {
	--color-fd-background: hsl(0, 0%, 7.04%);
	--color-fd-foreground: hsl(0, 0%, 92%);
	--color-fd-muted: hsl(0, 0%, 12.9%);
	--color-fd-muted-foreground: hsla(0, 0%, 70%, 0.8);
	--color-fd-popover: hsl(0, 0%, 11.6%);
	--color-fd-popover-foreground: hsl(0, 0%, 86.9%);
	--color-fd-card: hsl(0, 0%, 9.8%);
	--color-fd-card-foreground: hsl(0, 0%, 98%);
	--color-fd-border: hsla(0, 0%, 40%, 20%);
	--color-fd-primary: hsl(0, 0%, 98%);
	--color-fd-primary-foreground: hsl(0, 0%, 9%);
	--color-fd-secondary: hsl(0, 0%, 12.9%);
	--color-fd-secondary-foreground: hsl(0, 0%, 92%);
	--color-fd-accent: hsla(0, 0%, 40.9%, 30%);
	--color-fd-accent-foreground: hsl(0, 0%, 90%);
	--color-fd-ring: hsl(0, 0%, 54.9%);
}

/* Fix sidebar width - prevent items from shifting right */
#nd-sidebar {
	--fd-sidebar-width: 260px;
}

#nd-sidebar > div {
	width: 100%;
}

/* Sidebar items alignment fix */
.fd-sidebar-item,
[data-sidebar] nav {
	width: 100%;
}

/* Fix pagination buttons - prevent single button from stretching */
.fd-page-footer {
	display: flex;
	gap: 1rem;
}

.fd-page-footer > a {
	flex: 1;
	max-width: 50%;
}

.fd-page-footer > a:only-child {
	max-width: 50%;
	flex: 0 1 auto;
}

/* Code block container styling - fumadocs style */
[data-rehype-pretty-code-figure],
.fd-codeblock {
	position: relative;
	margin: 1.5rem 0;
	border-radius: 0.75rem;
	background: hsl(0, 0%, 9%);
	border: 1px solid hsla(0, 0%, 40%, 25%);
	overflow: hidden;
}

/* Code block title/filename header */
[data-rehype-pretty-code-figure] figcaption,
.fd-codeblock figcaption,
[data-rehype-pretty-code-title] {
	display: flex;
	align-items: center;
	gap: 0.5rem;
	padding: 0.625rem 1rem;
	font-size: 0.8125rem;
	font-weight: 500;
	color: hsla(0, 0%, 70%, 0.9);
	background: hsla(0, 0%, 100%, 0.03);
	border-bottom: 1px solid hsla(0, 0%, 40%, 20%);
}

[data-rehype-pretty-code-figure] figcaption::before,
.fd-codeblock figcaption::before {
	content: "";
	display: inline-block;
	width: 14px;
	height: 14px;
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='rgba(255,255,255,0.5)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z'%3E%3C/path%3E%3Cpolyline points='14 2 14 8 20 8'%3E%3C/polyline%3E%3C/svg%3E");
	background-size: contain;
	background-repeat: no-repeat;
	opacity: 0.7;
}

/* Pre element styling */
[data-rehype-pretty-code-figure] pre,
.fd-codeblock pre {
	margin: 0;
	padding: 1rem;
	background: transparent !important;
	border: none !important;
	border-radius: 0;
	overflow-x: auto;
	font-size: 0.875rem;
	line-height: 1.7;
}

/* Code element styling */
[data-rehype-pretty-code-figure] code,
.fd-codeblock code {
	font-family: var(--font-mono), ui-monospace, monospace;
	font-size: 0.8125rem;
	background: transparent !important;
}

/* Line numbers styling */
[data-rehype-pretty-code-figure] code[data-line-numbers] {
	counter-reset: line;
}

[data-rehype-pretty-code-figure] code[data-line-numbers] > [data-line]::before {
	counter-increment: line;
	content: counter(line);
	display: inline-block;
	width: 1.5rem;
	margin-right: 1.5rem;
	text-align: right;
	color: hsla(0, 0%, 50%, 0.5);
	font-size: 0.75rem;
}

/* Line highlighting */
[data-rehype-pretty-code-figure] [data-highlighted-line] {
	background: hsla(270, 60%, 50%, 0.15);
	margin: 0 -1rem;
	padding: 0 1rem;
	border-left: 2px solid hsl(270, 60%, 60%);
}

/* Copy button styling - fumadocs style */
[data-rehype-pretty-code-figure] button[aria-label="Copy"],
.fd-codeblock button[data-copy],
.fd-codeblock > button,
.fd-codeblock [aria-label="Copy"] {
	position: absolute;
	top: 0.5rem;
	right: 0.5rem;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 2rem;
	height: 2rem;
	padding: 0;
	border-radius: 0.375rem;
	background: hsla(0, 0%, 100%, 0.05);
	border: 1px solid hsla(0, 0%, 100%, 0.1);
	color: hsla(0, 0%, 100%, 0.5);
	opacity: 0;
	transition: all 0.15s ease;
	cursor: pointer;
	z-index: 10;
}

[data-rehype-pretty-code-figure]:hover button[aria-label="Copy"],
.fd-codeblock:hover button[data-copy],
.fd-codeblock:hover > button,
.fd-codeblock:hover [aria-label="Copy"] {
	opacity: 1;
}

[data-rehype-pretty-code-figure] button[aria-label="Copy"]:hover,
.fd-codeblock button[data-copy]:hover,
.fd-codeblock > button:hover,
.fd-codeblock [aria-label="Copy"]:hover {
	background: hsla(0, 0%, 100%, 0.1);
	border-color: hsla(0, 0%, 100%, 0.2);
	color: hsla(0, 0%, 100%, 0.8);
}

/* When there's a title, adjust copy button position */
[data-rehype-pretty-code-figure]:has(figcaption) button[aria-label="Copy"],
.fd-codeblock:has(figcaption) button[data-copy],
.fd-codeblock:has(figcaption) > button {
	top: 0.375rem;
}

/* Inline code styling */
:not(pre) > code {
	padding: 0.2em 0.4em;
	border-radius: 0.375rem;
	background: hsla(270, 30%, 50%, 0.1);
	color: hsl(270, 60%, 65%);
	font-size: 0.875em;
	font-family: var(--font-mono), ui-monospace, monospace;
	border: 1px solid hsla(270, 30%, 50%, 0.15);
}

.dark :not(pre) > code {
	background: hsla(270, 30%, 50%, 0.15);
	color: hsl(270, 60%, 75%);
	border-color: hsla(270, 30%, 50%, 0.2);
}

/* Scrollbar styling for code blocks */
[data-rehype-pretty-code-figure] pre::-webkit-scrollbar,
.fd-codeblock pre::-webkit-scrollbar {
	height: 8px;
}

[data-rehype-pretty-code-figure] pre::-webkit-scrollbar-track,
.fd-codeblock pre::-webkit-scrollbar-track {
	background: transparent;
}

[data-rehype-pretty-code-figure] pre::-webkit-scrollbar-thumb,
.fd-codeblock pre::-webkit-scrollbar-thumb {
	background: hsla(0, 0%, 50%, 0.3);
	border-radius: 4px;
}

[data-rehype-pretty-code-figure] pre::-webkit-scrollbar-thumb:hover,
.fd-codeblock pre::-webkit-scrollbar-thumb:hover {
	background: hsla(0, 0%, 50%, 0.5);
}
